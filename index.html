
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Introduction Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.0.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="step-00/" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter active" data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="step-00/">
            
                <a href="step-00/">
            
                    
                    00 Vagrant Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="step-01/">
            
                <a href="step-01/">
            
                    
                    01 Basic inventory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="step-02/">
            
                <a href="step-02/">
            
                    
                    02 First modules and facts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="step-03/">
            
                <a href="step-03/">
            
                    
                    03 Groups and variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="step-04/">
            
                <a href="step-04/">
            
                    
                    04 Playbooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="step-05/">
            
                <a href="step-05/">
            
                    
                    05 Playbooks, pushing files on nodes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="step-06/">
            
                <a href="step-06/">
            
                    
                    06 Playbooks and failures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="step-07/">
            
                <a href="step-07/">
            
                    
                    07 Playbook conditionals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="step-08/">
            
                <a href="step-08/">
            
                    
                    08 Git module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="step-09/">
            
                <a href="step-09/">
            
                    
                    09 Extending to several hosts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="step-10/">
            
                <a href="step-10/">
            
                    
                    10 Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="step-11/">
            
                <a href="step-11/">
            
                    
                    11 Variables again
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="step-12/">
            
                <a href="step-12/">
            
                    
                    12 Migrating to roles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="step-13/">
            
                <a href="step-13/">
            
                    
                    13 Using tags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="step-14/README.md">
            
                <a href="step-14/README.md">
            
                    
                    14 Roles dependencies (TBD)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="step-15/README.md">
            
                <a href="step-15/README.md">
            
                    
                    15 Debugging (TBD)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="step-99/README.md">
            
                <a href="step-99/README.md">
            
                    
                    99 The end
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ansible-tutorial">Ansible tutorial</h1>
<p>This tutorial presents Ansible step-by-step. You&apos;ll need to have a (virtual or
physical) machine to act as an Ansible node. A Vagrant environment is provided for 
going through this tutorial.</p>
<p>Ansible is a configuration management software that lets you control and
configure nodes from another machine. What makes it different from other
management software is that Ansible uses (potentially existing) SSH
infrastructure, while others (Chef, Puppet, ...) need a specific PKI
infrastructure to be set up.</p>
<p>Ansible also emphasizes push mode, where configuration is pushed from a master
machine (a master machine is only a machine where you can SSH to nodes from) to
nodes, while most other CM typically do it the other way around (nodes pull
their config at times from a master machine).</p>
<p>This mode is really interesting since you do not need to have a &apos;publicly&apos;
accessible &apos;master&apos; to be able to configure remote nodes: it&apos;s the nodes
that need to be accessible (we&apos;ll see later that &apos;hidden&apos; nodes can pull their
configuration too!), and most of the time they are.</p>
<p>This tutorial has been tested with <strong>Ansible 2.7.1</strong>.</p>
<p>We&apos;re also assuming you have a keypair in your ~/.ssh directory.</p>
<h2 id="quick-start">Quick start</h2>
<ul>
<li>install Vagrant if you don&apos;t have it</li>
<li>install ansible (preferably 2.7.1 and using pip+virtualenv)</li>
<li><code>vagrant up</code></li>
<li>goto <a href="step-00/">step-00</a></li>
</ul>
<h2 id="complete-explanations">Complete explanations</h2>
<h3 id="installing-ansible">Installing Ansible</h3>
<p>The reference is the <a href="https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html" _target="blank">installation
guide</a>,
but I strongly recommend the <a href="#using-pip--virtualenv-higly-recommended-">Using pip &amp; virtualenv (higly recommended
!)</a> method.</p>
<h4 id="using-pip--virtualenv-higly-recommended-">Using pip &amp; virtualenv (higly recommended !)</h4>
<p>The best way to install Ansible (by far) is to use <code>pip</code> and virtual
environments.</p>
<p>Using virtualenv will let you have multiple Ansible versions
installed side by side, and test upgrades or use different versions in
different projects. Also, by using a virtualenv, you won&apos;t pollute your
system&apos;s python installation.</p>
<p>Check
<a href="https://virtualenvwrapper.readthedocs.io/en/latest/" _target="blank">virtualenvwrapper</a>
for this. It makes managing virtualenvs very easy.</p>
<p>Under Ubuntu, installing virtualenv &amp; virtualenvwrapper can be done like
so:</p>
<pre><code class="lang-bash">sudo apt-get install python-virtualenv virtualenvwrapper python-pip
<span class="hljs-built_in">exec</span> <span class="hljs-variable">$SHELL</span>
</code></pre>
<p>You can then create a virtualenv:</p>
<pre><code class="lang-bash">mkvirtualenv ansible-tuto
workon ansible-tuto
</code></pre>
<p>(<code>mkvirtualenv</code> usually switches you automatically to your newly created
virtualenv, so here <code>workon ansible-tuto</code> is not strictly necessary, but
lets be safe).</p>
<p>Then, install ansible via <code>pip</code>:</p>
<pre><code class="lang-bash">pip install ansible==2.7.1
</code></pre>
<p>(or use whatever version you want).</p>
<p>When you&apos;re done, you can deactivate your virtualenv to return to your
system&apos;s python settings &amp; modules:</p>
<pre><code class="lang-bash">deactivate
</code></pre>
<p>If you later want to return to your virtualenv:</p>
<pre><code class="lang-bash">workon ansible-tuto
</code></pre>
<p>Use <code>lsvirtualenv</code> to list all your virtual environments.</p>
<h4 id="from-source-if-you-want-to-hack-on-ansible-source-code">From source (if you want to hack on ansible source code)</h4>
<p>Ansible devel branch is always usable, so we&apos;ll run straight from a git checkout.
You might need to install git for this (<code>sudo apt-get install git</code> on Debian/Ubuntu).</p>
<pre><code class="lang-bash">git <span class="hljs-built_in">clone</span> git://github.com/ansible/ansible.git
<span class="hljs-built_in">cd</span> ./ansible
</code></pre>
<p>At this point, we can load the Ansible environment:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">source</span> ./hacking/env-setup
</code></pre>
<h4 id="from-a-distribution-package-discouraged">From a distribution package (discouraged)</h4>
<pre><code class="lang-bash">sudo apt-get install ansible
</code></pre>
<h4 id="from-a-built-deb-package-discouraged">From a built deb package (discouraged)</h4>
<p>When running from an distribution package, this is absolutely not
necessary. If you prefer running from an up to date Debian package,
Ansible provides a <code>make target</code> to build it. You need a few packages to
build the deb and
few dependencies:</p>
<pre><code class="lang-bash">sudo apt-get install make fakeroot cdbs python-support python-yaml python-jinja2 python-paramiko python-crypto python-pip
git <span class="hljs-built_in">clone</span> git://github.com/ansible/ansible.git
<span class="hljs-built_in">cd</span> ./ansible
make deb
sudo dpkg -i ../ansible_x.y_all.deb (version may vary)
</code></pre>
<h3 id="cloning-the-tutorial">Cloning the tutorial</h3>
<pre><code class="lang-bash">git <span class="hljs-built_in">clone</span> https://github.com/leucos/ansible-tuto.git
<span class="hljs-built_in">cd</span> ansible-tuto
</code></pre>
<h3 id="running-the-tutorials-interactively-with-docker">Running the tutorials interactively with Docker</h3>
<p>You can run the tutorials here interactively including a very simple setup with docker.</p>
<p>Check <a href="https://github.com/turkenh/ansible-interactive-tutorial" _target="blank">this repository</a> for details.</p>
<h3 id="using-vagrant-with-the-tutorial">Using Vagrant with the tutorial</h3>
<p>It&apos;s highly recommended to use Vagrant to follow this tutorial. If you don&apos;t have 
it already, setting up should be quite easy and is described in <a href="https://github.com/leucos/ansible-tuto/tree/master/step-00/README.md" _target="blank">step-00/README.md</a>.</p>
<p>If you wish to proceed without Vagrant (not recommended!), go straight to
<a href="https://github.com/leucos/ansible-tuto/tree/master/step-01" _target="blank">step-01/README.md</a>.</p>
<h2 id="contents">Contents</h2>
<p><a href="https://docs.ansible.com/ansible/glossary.html" _target="blank">Terminology</a>:</p>
<ul>
<li><a href="https://docs.ansible.com/ansible/intro_adhoc.html" _target="blank">command or
action</a>: <a href="https://docs.ansible.com/ansible/modules.html" _target="blank">ansible module</a> executed in
stand-alone mode. Intro in <a href="https://github.com/leucos/ansible-tuto/tree/master/step-02" _target="blank">step-02</a>.</li>
<li>task: combines an action (a module and its arguments) with a name
and optionally some other keywords (like looping directives).</li>
<li>play: a yaml structure executing a list of roles or tasks over a list
of hosts</li>
<li><a href="https://docs.ansible.com/ansible/playbooks_intro.html" _target="blank">playbook</a>:
yaml file containing multiple plays. Intro in
<a href="https://github.com/leucos/ansible-tuto/tree/master/step-04" _target="blank">step-04</a>.</li>
<li><a href="https://docs.ansible.com/ansible/playbooks_roles.html" _target="blank">role</a>: an
organisational unit grouping tasks together in order to achieve
something (install a piece of software for instance). Intro in
<a href="https://github.com/leucos/ansible-tuto/tree/master/step-12" _target="blank">step-12</a>.</li>
</ul>
<p>Just in case you want to skip to a specific step, here is a topic table of contents.</p>
<ul>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-00" _target="blank">00. Vagrant Setup</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-01" _target="blank">01. Basic inventory</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-02" _target="blank">02. First modules and facts</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-03" _target="blank">03. Groups and variables</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-04" _target="blank">04. Playbooks</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-05" _target="blank">05. Playbooks, pushing files on nodes</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-06" _target="blank">06. Playbooks and failures</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-07" _target="blank">07. Playbook conditionals</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-08" _target="blank">08. Git module</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-09" _target="blank">09. Extending to several hosts</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-10" _target="blank">10. Templates</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-11" _target="blank">11. Variables again</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-12" _target="blank">12. Migrating to roles</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-13" _target="blank">13. Using tags (TBD)</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-14" _target="blank">14. Roles dependencies (TBD)</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-15" _target="blank">15. Debugging (TBD)</a></li>
<li><a href="https://github.com/leucos/ansible-tuto/tree/master/step-99" _target="blank">99. The end</a></li>
</ul>
<h2 id="contributing">Contributing</h2>
<p>Thanks to all people who have contributed to this tutorial:</p>
<ul>
<li><a href="http://github.com/oxyrox" _target="blank">Aladin Jaermann</a></li>
<li><a href="https://github.com/algal" _target="blank">Alexis Gallagher</a></li>
<li><a href="https://github.com/aliceinwire" _target="blank">Alice Ferrazzi</a></li>
<li><a href="https://github.com/aliceriot" _target="blank">Alice Pote</a></li>
<li><a href="https://github.com/amitit" _target="blank">Amit Jakubowicz</a></li>
<li><a href="https://github.com/terroirman" _target="blank">Anonymous Contributor</a></li>
<li><a href="https://github.com/arbabnazar" _target="blank">Arbab Nazar</a></li>
<li><a href="https://github.com/atillamas" _target="blank">Atilla Mas</a></li>
<li><a href="https://github.com/noqcks" _target="blank">Ben Visser</a></li>
<li><a href="https://github.com/bdotdub" _target="blank">Benny Wong</a></li>
<li><a href="https://github.com/bernardoVale" _target="blank">Bernardo Vale</a></li>
<li><a href="https://github.com/ccschmitz" _target="blank">Chris Schmitz</a></li>
<li><a href="https://github.com/mouchh" _target="blank">Cyril Mouchel</a></li>
<li><a href="https://github.com/dalton" _target="blank">dalton</a></li>
<li><a href="https://github.com/dannyman" _target="blank">Daniel Howard</a></li>
<li><a href="https://github.com/dagolden" _target="blank">David Golden</a></li>
<li><a href="https://github.com/daviderestivo" _target="blank">Davide Restivo</a></li>
<li><a href="https://github.com/frodopwns" _target="blank">Eric Corson</a></li>
<li><a href="https://github.com/ekalinin" _target="blank">Eugene Kalinin</a></li>
<li><a href="https://github.com/GMLudo" _target="blank">Ludovic Gasc</a></li>
<li><a href="https://github.com/htgoebel" _target="blank">Hartmut Goebel</a></li>
<li><a href="https://github.com/jellyjellyrobot" _target="blank">Jelly Robot</a></li>
<li><a href="https://github.com/rothgar" _target="blank">Justin Garrison</a></li>
<li><a href="https://github.com/karlo57" _target="blank">Karlo</a></li>
<li><a href="https://github.com/mac2000" _target="blank">Marchenko Alexandr</a></li>
<li><a href="http://github.com/7aitsev" _target="blank">Maxim Zaitsev</a></li>
<li><a href="http://github.com/MSumulong/" _target="blank">Michael B. Sumulong</a></li>
<li><a href="https://github.com/mshavliuk" _target="blank">Mikhail Shavliuk</a></li>
<li><a href="https://github.com/mxxcon" _target="blank">mxxcon</a></li>
<li><a href="https://github.com/skinp" _target="blank">Patrick Pelletier</a></li>
<li><a href="https://github.com/Pilooz" _target="blank">Pierre-Gilles Levallois</a></li>
<li><a href="https://github.com/ruudk" _target="blank">Ruud Kamphuis</a></li>
<li><a href="https://github.com/tkermode" _target="blank">tkermode</a></li>
<li><a href="https://github.com/torenware" _target="blank">torenware</a></li>
<li><a href="https://github.com/boivie" _target="blank">Victor Boivie</a></li>
<li><a href="https://github.com/ydakuka" _target="blank">Yauheni Dakuka</a></li>
</ul>
<p>(and sorry if I forgot anyone)</p>
<p>I&apos;ve been using Ansible almost since its birth, but I learned a lot in
the process of writing it. If you want to jump in, it&apos;s a great way to
learn, feel free to add your contributions.</p>
<p>The chapters being written live in the
<a href="https://github.com/leucos/ansible-tuto/tree/writing" _target="blank">writing</a> branch.</p>
<p>If you have ideas on topics that would require a chapter, please open a
PR.</p>
<p>I&apos;m also open on pairing for writing chapters. Drop me a note if you&apos;re
interested.</p>
<p>If you make changes or add chapters, please fill the <code>test/expectations</code>
file and run the tests (<code>test/run.sh</code>).
See the <code>test/run.sh</code> file for (a bit) more information.</p>
<p>When adding a new chapter (e.g. <code>step-NN</code>), please issue:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> step-99
ln -sf ../step-NN/{hosts,roles,site.yml,group_vars,host_vars} .
</code></pre>
<p>For typos, grammar, etc... please send a PR for the master branch
directly.</p>
<p>Thank you!</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="step-00/" class="navigation navigation-next navigation-unique" aria-label="Next page: 00 Vagrant Setup">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Introduction","level":"1.1","depth":1,"next":{"title":"00 Vagrant Setup","level":"1.2","depth":1,"path":"step-00/README.md","ref":"step-00/README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"3.0.x","theme":"default","variables":{},"plugins":["-sharing","edit-link@2.0.x","github@2.0.x"],"pluginsConfig":{"edit-link":{"base":"https://github.com/leucos/ansible-tuto/edit/master","label":"Edit"},"github":{"url":"https://github.com/leucos/ansible-tuto"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"README.md","mtime":"2020-05-25T23:38:30.306Z","type":"markdown"},"gitbook":{"version":"3.0.3","time":"2020-05-25T23:48:43.246Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/buttons.js"></script>
        
    

    </body>
</html>

